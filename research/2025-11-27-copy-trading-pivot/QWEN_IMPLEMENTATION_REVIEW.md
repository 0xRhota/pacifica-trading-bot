# Qwen Implementation Review - Swing Trading Bot
## Date: November 27, 2025

---

## Summary of Qwen's Analysis

### 1. Take Profit / Stop Loss (15% / 5%)

**Verdict: Consider widening**

- The 3:1 R/R ratio is mathematically correct (only needs 25% win rate)
- **Issue**: 5% stop loss may be too tight for crypto volatility
- **Recommendation**: Increase to 8-10% SL / 24-30% TP to maintain 3:1 ratio while reducing stop-outs

### 2. Minimum Hold Time (4 hours)

**Verdict: Appropriate**

- Aligns perfectly with research (90% of winning trades held 4+ hours)
- Stop loss can still trigger before 4 hours (safety first)
- Min hold only prevents LLM from closing early for non-risk reasons

### 3. Trend Reversal Logic (SMA20 < SMA50 AND MACD < 0)

**Verdict: Potentially too strict**

- Using AND condition requires both signals
- Could miss trend reversals if only one condition is met
- **Recommendation**: Consider OR condition for earlier exits
- **BUG FOUND**: Code only shows logic for LONGS - ensure SHORTS have symmetric logic

### 4. Trailing Stops

**Verdict: Yes, add them**

- Current fixed TP may miss extended trends
- Trailing stop would lock in profits as price rises
- Could capture 20-30% moves instead of capping at 15%

### 5. What Could Cause Failure?

1. **Volatility overload** - 5% SL too tight, frequent stops
2. **Poor LLM entries** - Reliance on LLM for entries introduces uncertainty
3. **Strict trend reversal** - AND condition misses key exits
4. **Split DEX focus** - Capital dilution across Hibachi + Extended
5. **Overfitting** - Parameters may work in backtest but fail live
6. **30-min interval** - May miss critical moves in fast markets

### 6. Running on Two DEXs

**Verdict: Mixed**

**Pros:**
- Diversification
- Access to different liquidity pools

**Cons:**
- Split capital = smaller positions
- Increased complexity and bug potential
- Possible slippage on less liquid DEX

**Recommendation**: Focus on single best DEX unless both have equal liquidity

### 7. Critical Bugs/Edge Cases

1. **SHORT positions**: Trend reversal logic only shown for LONGS
   - Need to add: `if side == 'SHORT' and sma20 > sma50 and macd > 0`

2. **SMA timeframe**: Ensure SMAs calculated on appropriate interval
   - 30-min checks with 20-period SMA = 10 hours of data (appropriate for swing)

3. **Exit order**: Ensure take profit checked before stop loss

### 8. Metrics to Track

| Metric | Purpose |
|--------|---------|
| Win rate | Must be >25% for profitability |
| Avg P/L per trade | Ensure R/R matches target |
| Time held distribution | Verify 4+ hour holds |
| Exit reasons | Which rules trigger most often |
| Balance over time | Overall profitability |
| Slippage | Entry/exit execution quality |
| Max drawdown | Risk exposure |
| Sharpe ratio | Risk-adjusted returns |

---

## Action Items Based on Review

### High Priority:
1. [ ] Add SHORT position trend reversal logic
2. [ ] Consider widening SL to 8% (TP to 24%) to reduce stop-outs
3. [ ] Add trailing stop functionality

### Medium Priority:
4. [ ] Test single DEX vs dual DEX performance
5. [ ] Verify SMA/MACD timeframe alignment
6. [ ] Add comprehensive metrics tracking

### Low Priority:
7. [ ] Consider OR condition for trend reversal
8. [ ] Add position sizing based on volatility

---

## Qwen's Full Reasoning

> The 3:1 R/R ratio is mathematically sound for a 25% win rate... [but] crypto's high volatility may cause frequent stop losses, requiring a higher win rate than 25%.

> The 4-hour minimum matches the research's finding that 90% of successful trades hold for â‰¥4 hours. This is appropriate.

> The AND condition for trend reversal might be too strict... Maybe using OR would capture more signals.

> Trailing stops could improve profit capture... allowing the stop to follow the trend, thus increasing potential profits beyond the fixed 15%.

> Running on two DEXs might split liquidity and increase complexity. It's better to focus on one unless both are necessary.

---

*Review generated by Qwen QwQ-32B via OpenRouter*
