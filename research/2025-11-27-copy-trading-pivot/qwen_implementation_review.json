{
  "model": "qwen/qwq-32b",
  "messages": [
    {
      "role": "user",
      "content": "Review this swing trading bot implementation. Use deep reasoning to identify any issues, improvements, or risks.\n\n## CONTEXT:\n\nBased on research showing:\n1. Winning wallet: 75.5% win rate, 90% trades held 4+ hours\n2. Scalping fails: Needs 68% win rate with 2:1 negative R/R\n3. Swing trading works: Only needs 25% win rate with 3:1 positive R/R\n\n## IMPLEMENTATION:\n\n### Config (swing_trading_agent/config.py):\n```python\nTAKE_PROFIT_PCT = 15.0  # 15% take profit\nSTOP_LOSS_PCT = 5.0     # 5% stop loss\nMIN_HOLD_HOURS = 4.0    # 4 hour minimum\nMAX_HOLD_HOURS = 96.0   # 4 day maximum\nMAX_POSITIONS = 3       # Only 2-3 positions\nCHECK_INTERVAL_SECONDS = 1800  # 30 minute cycles\n```\n\n### Exit Rules (swing_exit_rules.py):\n```python\nclass SwingExitRules:\n    def check_should_force_close(...):\n        # RULE 1: Take Profit at +15%\n        if pnl_pct >= self.take_profit_pct:\n            return True, 'Take profit reached'\n        \n        # RULE 2: Stop Loss at -5%\n        if pnl_pct <= -self.stop_loss_pct:\n            return True, 'Stop loss triggered'\n        \n        # RULE 3: Max hold time (96 hours)\n        if hold_hours >= self.max_hold_hours:\n            return True, 'Max hold exceeded'\n        \n        # RULE 4: Trend reversal\n        if side == 'LONG' and sma20 < sma50 and macd < 0:\n            return True, 'Trend reversal'\n    \n    def should_prevent_close(...):\n        # Prevent LLM from closing before 4 hours\n        if hold_hours < self.min_hold_hours:\n            if not at_target_or_stop:\n                return True, 'Min hold not met'\n```\n\n### Strategy Prompt (v5_swing_trading.txt):\n- Trend-following only (SMA20 vs SMA50)\n- Entry: RSI 30-45 for longs, 55-70 for shorts\n- MACD confirmation required\n- Volume above average\n- Max 2-3 positions\n\n### Bot (bot_swing.py):\n- Runs on Hibachi AND Extended simultaneously\n- 30-minute check intervals\n- LLM makes entry decisions\n- Hard rules override LLM for exits\n- Swing exit rules enforce 3:1 R/R\n\n## QUESTIONS FOR REVIEW:\n\n1. Is 15% take profit / 5% stop loss appropriate for crypto volatility?\n2. Is 4 hour minimum hold too short or too long?\n3. Is the trend reversal logic (SMA20 < SMA50 + MACD < 0) too strict?\n4. Should we add trailing stops?\n5. What could cause this strategy to fail?\n6. Is running on two DEXs simultaneously a good idea or does it split focus?\n7. Any critical bugs or edge cases you see in the logic?\n8. What metrics should we track to know if it's working?\n\nBe thorough. Use chain-of-thought reasoning."
    }
  ],
  "temperature": 0.3,
  "max_tokens": 4000
}
